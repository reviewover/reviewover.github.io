window.addEvent("load",function(){$$(".gkHighlighterGK4").each(function(c,b){var a=$Gavick[c.getProperty("id")];new GKNewsHighligher({wrapper:c,speed:a.animationSpeed,interval:a.animationInterval,fun:a.animationFun,type:a.animationType,mouseOver:a.mouseover})})});var GKNewsHighligher=new Class({options:{wrapper:null,speed:null,interval:null,fun:null,type:null,mouseOver:null},initialize:function(b){this.setOptions(b);var c=this;this.prev=null;this.next=null;this.item_anim=false;var a=this.options.wrapper.getElement(".gkHighlighterInterface");if(a){if(a.getElement(".next")){this.prev=this.options.wrapper.getElement(".prev");this.next=this.options.wrapper.getElement(".next")}this.options.wrapper.getElement(".gkHighlighterWrapper").setStyle("width",((this.options.wrapper.getSize().x-(a.getSize().x+a.getStyle("margin-left").toInt()+a.getStyle("margin-right").toInt()+a.getStyle("padding-left").toInt()+a.getStyle("padding-right").toInt()+a.getStyle("border-left-width").toInt()+a.getStyle("border-right-width").toInt()))-1)+"px")}else{this.options.wrapper.getElement(".gkHighlighterWrapper").setStyle("width",this.options.wrapper.getSize().x+"px")}if(this.options.wrapper.getElement(".gkHighlighterWrapper").getElement(".nowrap")){this.options.wrapper.getElement(".gkHighlighterWrapper").getElement(".nowrap").setStyle("position","static")}(this.options.type=="linear")?this.linear():this.slides()},linear:function(){var e=this;var a=e.options.wrapper.getElement(".nowrap");e.w=0;e.options.wrapper.getElements(".nowrap span").each(function(g,f){e.w+=g.getSize().x});var d=((e.w+e.options.wrapper.getSize().x)/e.options.speed)*1000;var c=d;var b=new Fx.Tween(a,{duration:d,transition:Fx.Transitions.linear,onComplete:function(){var f=e.options.wrapper.getSize().x;b.set("margin-left",f);b.start("margin-left",f,-e.w)}});if(e.options.mouseOver){a.addEvent("mouseenter",function(){b.pause()});a.addEvent("mouseleave",function(){b.resume()})}b.set("margin-left",e.options.wrapper.getSize().x);b.start("margin-left",e.options.wrapper.getSize().x,-e.w)},slides:function(){var a=this;a.items=a.options.wrapper.getElements(".gkHighlighterItem");a.items.setStyle("display","block");a.effects1=[];a.effects2=[];a.actual=0;a.mouseIsOver=false;a.animPlay=false;a.timer=(function(){a.timerFunc()}).periodical(a.options.interval);a.items.each(function(c,b){c.setStyle("z-index",a.items.length-b);a.effects1[b]=new Fx.Tween(c,{duration:a.options.speed,transition:a.options.fun,wait:true,onStart:function(){a.animPlay=true},onComplete:function(){a.animPlay=false}});a.effects2[b]=new Fx.Tween(c,{duration:a.options.speed,transition:a.options.fun,wait:true});if(b!=0){a.effects1[b].set("opacity",0)}if(a.options.type!=="linear"){a.effects2[b].set("top",0)}});if(a.options.mouseOver){this.options.wrapper.getElement(".gkHighlighterWrapper").addEvent("mouseenter",function(){a.mouseIsOver=true});this.options.wrapper.getElement(".gkHighlighterWrapper").addEvent("mouseleave",function(){a.mouseIsOver=false})}if(a.next){a.next.addEvent("click",function(b){new Event(b).stop();if(!a.animPlay){a.effects1[a.actual].start("opacity",0);a.effects2[a.actual].start("top",0,-24);a.actual++;if(a.actual>a.items.length-1){a.actual=0}a.effects1[a.actual].start("opacity",1);a.effects2[a.actual].start("top",24,0);$clear(a.timer);a.timer=(function(){a.timerFunc()}).periodical(a.options.interval)}});a.prev.addEvent("click",function(b){new Event(b).stop();if(!a.animPlay){a.effects1[a.actual].start("opacity",0);a.effects2[a.actual].start("top",0,24);(a.actual==0)?a.actual=a.items.length-1:a.actual--;a.effects1[a.actual].start("opacity",1);a.effects2[a.actual].start("top",-24,0);$clear(a.timer);a.timer=(function(){a.timerFunc()}).periodical(a.options.interval)}})}},timerFunc:function(){var a=this;if(a.mouseIsOver==false){a.effects1[a.actual].start("opacity",0);a.effects2[a.actual].start("top",0,-24);a.actual++;if(a.actual>a.items.length-1){a.actual=0}a.effects1[a.actual].start("opacity",1);a.effects2[a.actual].start("top",24,0)}}});GKNewsHighligher.implement(new Options);